import { useRef, useState } from 'react';
import './Nll_VideoPlayer.css'

interface CustomVideoPlayerProps {
	src: string;
	poster: string;
}

export default function Nll_VideoPlayer({ src, poster }: CustomVideoPlayerProps) {
	const videoRef = useRef<HTMLVideoElement>(null);
	const thumbImg = useRef<HTMLDivElement>(null);
	const [isPlaying, setIsPlaying] = useState(false);
	const [display, setDisplay] = useState('block');

	const toggleColor = () => {
		// setIsBlue(!isBlue);
		if (display === 'block') {
			setDisplay('none');
		}
	};

	const togglePlay = () => {
		if (videoRef.current) {
			if (isPlaying) {
				videoRef.current.pause();
			} else {
				videoRef.current.play();
			}
			setIsPlaying(!isPlaying);
		}
		toggleColor();
	};

	return (
		<div className="Nll_video_player" id="html_video_player" aria-label="Reproductor de video">
			<div className="video_player_container" style={{ zIndex: 0 }}>
				<div className="Nll_cued_thumbnail" ref={thumbImg} onClick={togglePlay} style={{ display: display }}>
					<div className="Nll_image_cover" style={{ backgroundImage: "url(/img/thumb_01.png)" }}></div>
					<button className="Nll_playthumb">
						<svg xmlns="http://www.w3.org/2000/svg" height="100%" viewBox="0 0 68 48" fill="none">
							<path className="Nll_playbutonbg" d="M0 24C0 0.999996 4 0.00192125 24 -4.57113e-06C25.0369 -0.000104415 42.0365 -4.57815e-06 43 0.00193091C64.3382 0.044794 68 1.0369 68 24C68 46.9631 64.3382 47.9552 43 47.9981C42.0365 48 25.0369 48 24 48C4 48 0 47 0 24Z" fill="hsla(240, 3.45%, 5.69%, 1)" />
							<path d="M45.3529 24C45.3536 24.295 45.2792 24.5851 45.1367 24.8422C44.9943 25.0993 44.7888 25.3145 44.5401 25.4671L29.1305 35.0384C28.8707 35.1999 28.5731 35.2881 28.2685 35.2938C27.9639 35.2995 27.6634 35.2226 27.3979 35.071C27.1349 34.9217 26.9158 34.7039 26.7632 34.4402C26.6105 34.1764 26.5299 33.8761 26.5294 33.5702V14.4298C26.5299 14.1239 26.6105 13.8236 26.7632 13.5598C26.9158 13.296 27.1349 13.0783 27.3979 12.929C27.6634 12.7774 27.9639 12.7004 28.2685 12.7062C28.5731 12.7119 28.8707 12.8001 29.1305 12.9616L44.5401 22.5329C44.7888 22.6855 44.9943 22.9007 45.1367 23.1578C45.2792 23.4149 45.3536 23.705 45.3529 24Z" fill="hsla(240, 100%, 96.67%, 1)" />
						</svg>
					</button>
					<div className="Nll_arrdown">
						<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
							<rect x="25" y="25" width="16" height="3" transform="rotate(-180 25 25)" fill="hsla(240, 100%, 96.67%, 1)" />
							<rect x="25" y="25" width="3" height="16" transform="rotate(-180 25 25)" fill="hsla(240, 100%, 96.67%, 1)" />
							<rect x="23.2634" y="21.1422" width="3" height="20" transform="rotate(135 23.2634 21.1422)" fill="hsla(240, 100%, 96.67%, 1)" />
						</svg>
					</div>
				</div>
				<div className="idloader" style={{ zIndex: -20, display: 'none' }}>
					<div className="video_loader loaderspin">
						<svg className="loader" viewBox="0 0 384 384" xmlns="http://www.w3.org/2000/svg">
							<svg viewBox="22 22 44 44" className="svgloader">
								<circle cx="44" cy="44" r="20.2" fill="none" stroke-width="3.6" className="loader-circle loader-circle-animation"></circle>
							</svg>
						</svg>
					</div>
				</div>
				<div className="video_container" style={{ zIndex: -99 }}>
					<video preload="metadata" onClick={togglePlay} ref={videoRef} src={src} poster={poster} className="media_video_html5" id="main_video" ></video>
				</div>
				<div className="video_cntrls active" id="video_controls" style={{ zIndex: -32 }}>
					<div className="progressbar">
						<div className="pbar_cont" role="slider" aria-valuetext="2 Minutos 40 Segundos de 5 Minutos 1 Segundos" style={{ touchAction: 'none' }} draggable="true">
							<div className="progressbar_life" style={{ transform: 'translateX(0px)' }}></div>
							<div className="progressbar_buffer" style={{ width: 0 }}></div>
						</div>
						<div className="progressbar_padding"></div>
						<div className="progressbar_scruber" style={{ transform: 'translateX(0px)' }}>
							<div className="scruber_dot"></div>
						</div>
					</div>
					<div className="v_ccntrls">
						<div className="vleft_cntrls">
							<button onClick={togglePlay} className="id idplay" id="playpausebtn" aria-keyshortcuts="k" data-title-no-tooltip="Reproducir" aria-label="Reproducir combinaciÃ³n de teclas k" title="Reproducir (k)">
								{isPlaying ? (
									<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 16 16" fill="none">
										<path d="M9.5 2.85714C9.5 2.38376 9.94772 2 10.5 2H12.5C13.0523 2 13.5 2.38376 13.5 2.85714V13.1429C13.5 13.6162 13.0523 14 12.5 14H10.5C9.94772 14 9.5 13.6162 9.5 13.1429V2.85714Z" fill="#EEEEFF" />
										<path d="M2.5 2.85714C2.5 2.38376 2.94772 2 3.5 2H5.5C6.05228 2 6.5 2.38376 6.5 2.85714V13.1429C6.5 13.6162 6.05228 14 5.5 14H3.5C2.94772 14 2.5 13.6162 2.5 13.1429V2.85714Z" fill="#EEEEFF" />
									</svg>
								) : (
									<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 16 16" fill="none">
										<path d="M13 8C13.0004 8.1567 12.9608 8.31083 12.8851 8.44741C12.8095 8.58398 12.7003 8.69835 12.5682 8.77939L4.38182 13.8641C4.2438 13.95 4.08572 13.9968 3.92391 13.9998C3.7621 14.0029 3.60242 13.962 3.46136 13.8814C3.32165 13.8021 3.20527 13.6865 3.12418 13.5463C3.0431 13.4062 3.00023 13.2467 3 13.0842V2.91582C3.00023 2.7533 3.0431 2.59378 3.12418 2.45365C3.20527 2.31353 3.32165 2.19786 3.46136 2.11855C3.60242 2.03799 3.7621 1.99712 3.92391 2.00016C4.08572 2.0032 4.2438 2.05005 4.38182 2.13586L12.5682 7.22061C12.7003 7.30165 12.8095 7.41602 12.8851 7.55259C12.9608 7.68917 13.0004 7.8433 13 8Z" fill="#EEEEFF" />
									</svg>
								)}
							</button>
							<button className="id idnext" id="forwardsbtn">
								<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 16 16" fill="none">
									<path d="M13 2.5V13.5C13 13.6326 12.9473 13.7598 12.8536 13.8536C12.7598 13.9473 12.6326 14 12.5 14C12.3674 14 12.2402 13.9473 12.1464 13.8536C12.0527 13.7598 12 13.6326 12 13.5V9.17313L4.52688 13.8469C4.37638 13.9414 4.20336 13.9939 4.02574 13.999C3.84811 14.0042 3.67235 13.9618 3.51663 13.8761C3.36091 13.7905 3.23091 13.6649 3.14007 13.5121C3.04924 13.3594 3.00088 13.1852 3 13.0075V2.9925C3.00088 2.81481 3.04924 2.64058 3.14007 2.48785C3.23091 2.33513 3.36091 2.20946 3.51663 2.12385C3.67235 2.03825 3.84811 1.99582 4.02574 2.00097C4.20336 2.00612 4.37638 2.05865 4.52688 2.15313L12 6.82688V2.5C12 2.36739 12.0527 2.24021 12.1464 2.14645C12.2402 2.05268 12.3674 2 12.5 2C12.6326 2 12.7598 2.05268 12.8536 2.14645C12.9473 2.24021 13 2.36739 13 2.5Z" fill="hsla(240, 100%, 96.67%, 1)" />
								</svg>
							</button>
							<div className="vol_cont">
								<button className="id idvol" id="volmutebtn">
									<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 16 16" fill="none">
										<path d="M1 6V10C1 10.5523 1.44772 11 2 11H4.22573L8.3125 13.818C9.0625 14.3351 10 13.6887 10 12.6544V3.34561C10 2.3113 9.0625 1.66486 8.3125 2.18201L4.22573 5H2C1.44772 5 1 5.44772 1 6Z" fill="hsla(240, 100%, 96.67%, 1)" />
										<path d="M12.4958 8.00561C12.4958 7.39719 12.2736 6.80966 11.8709 6.35311C11.7825 6.25605 11.6594 6.19761 11.5281 6.1904C11.3969 6.1832 11.2681 6.2278 11.1696 6.3146C11.071 6.4014 11.0105 6.52342 11.0013 6.65433C10.992 6.78525 11.0346 6.91456 11.1199 7.01436C11.3614 7.28826 11.4946 7.64067 11.4946 8.00561C11.4946 8.37055 11.3614 8.72296 11.1199 8.99686C11.0346 9.09666 10.992 9.22597 11.0013 9.35689C11.0105 9.4878 11.071 9.60982 11.1696 9.69662C11.2681 9.78342 11.3969 9.82802 11.5281 9.82082C11.6594 9.81361 11.7825 9.75517 11.8709 9.65811C12.2736 9.20156 12.4958 8.61403 12.4958 8.00561Z" fill="hsla(240, 100%, 96.67%, 1)" />
										<path d="M13.7252 11.3394C14.5468 10.4228 15.0007 9.23574 15 8.00561C15.001 6.77562 14.547 5.58862 13.7252 4.67249C13.6817 4.62237 13.6287 4.58139 13.5691 4.55195C13.5096 4.52251 13.4448 4.50519 13.3786 4.501C13.3123 4.49681 13.2458 4.50583 13.1831 4.52754C13.1203 4.54925 13.0625 4.58321 13.013 4.62745C12.9635 4.67169 12.9233 4.72532 12.8948 4.78522C12.8663 4.84512 12.85 4.91009 12.8468 4.97634C12.8437 5.0426 12.8538 5.10882 12.8765 5.17114C12.8992 5.23346 12.9342 5.29065 12.9792 5.33936C13.636 6.07271 13.9991 7.02206 13.9991 8.00592C13.9991 8.98978 13.636 9.93913 12.9792 10.6725C12.8932 10.7716 12.8496 10.9006 12.8579 11.0316C12.8662 11.1626 12.9257 11.285 13.0236 11.3725C13.1215 11.4601 13.25 11.5056 13.3812 11.4994C13.5125 11.4932 13.636 11.4357 13.7252 11.3394Z" fill="hsla(240, 100%, 96.67%, 1)" />
									</svg>
								</button>
								<div className="volumearea" role="slider" title="Volumen">
									<div className="volumeslider" draggable="true" style={{ touchAction: 'none' }}>
										<div className="volume_handle" style={{ left: '40px' }}></div>
									</div>
								</div>
							</div>
							<div className="id idtimestamp" style={{ userSelect: 'none' }}>
								<span className="current">0:00</span> / <span className="duration">0:00</span>
							</div>
						</div>
						<div className="vright_cntrls">
							<button className="id idcaptions" id="captionsbtn">
								<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 16 16" fill="none">
									<path d="M14 3H2C1.73478 3 1.48043 3.10536 1.29289 3.29289C1.10536 3.48043 1 3.73478 1 4V12C1 12.2652 1.10536 12.5196 1.29289 12.7071C1.48043 12.8946 1.73478 13 2 13H14C14.2652 13 14.5196 12.8946 14.7071 12.7071C14.8946 12.5196 15 12.2652 15 12V4C15 3.73478 14.8946 3.48043 14.7071 3.29289C14.5196 3.10536 14.2652 3 14 3ZM7.25 10.165C6.86995 10.3844 6.43884 10.5 5.99999 10.5C5.56113 10.5 5.13001 10.3845 4.74995 10.1651C4.36988 9.94568 4.05427 9.63008 3.83484 9.25003C3.61541 8.86997 3.49989 8.43885 3.49989 8C3.49989 7.56115 3.61541 7.13003 3.83484 6.74997C4.05427 6.36992 4.36988 6.05432 4.74995 5.8349C5.13001 5.61549 5.56113 5.49998 5.99999 5.5C6.43884 5.50002 6.86995 5.61555 7.25 5.835C7.30868 5.86686 7.36038 5.91015 7.40205 5.96232C7.44373 6.01449 7.47453 6.07447 7.49264 6.13874C7.51076 6.203 7.51582 6.27024 7.50753 6.33649C7.49924 6.40275 7.47776 6.46667 7.44436 6.52448C7.41097 6.5823 7.36633 6.63284 7.31308 6.67313C7.25984 6.71342 7.19906 6.74263 7.13434 6.75905C7.06962 6.77546 7.00227 6.77875 6.93626 6.76872C6.87025 6.75869 6.80692 6.73553 6.75 6.70062C6.52196 6.5691 6.26333 6.49991 6.00008 6.5C5.73683 6.50009 5.47824 6.56946 5.25029 6.70113C5.02234 6.83281 4.83306 7.02215 4.70146 7.25015C4.56986 7.47814 4.50058 7.73675 4.50058 8C4.50058 8.26325 4.56986 8.52186 4.70146 8.74985C4.83306 8.97785 5.02234 9.16719 5.25029 9.29887C5.47824 9.43054 5.73683 9.49991 6.00008 9.5C6.26333 9.50009 6.52196 9.4309 6.75 9.29937C6.86453 9.23718 6.99882 9.22217 7.12426 9.25753C7.2497 9.29289 7.35638 9.37583 7.42156 9.48869C7.48675 9.60154 7.50529 9.73539 7.47325 9.86171C7.4412 9.98804 7.3611 10.0969 7.25 10.165ZM12.25 10.165C11.87 10.3844 11.4388 10.5 11 10.5C10.5611 10.5 10.13 10.3845 9.74994 10.1651C9.36988 9.94568 9.05427 9.63008 8.83484 9.25003C8.61541 8.86997 8.49989 8.43885 8.49989 8C8.49989 7.56115 8.61541 7.13003 8.83484 6.74997C9.05427 6.36992 9.36988 6.05432 9.74994 5.8349C10.13 5.61549 10.5611 5.49998 11 5.5C11.4388 5.50002 11.87 5.61555 12.25 5.835C12.3087 5.86686 12.3604 5.91015 12.4021 5.96232C12.4437 6.01449 12.4745 6.07447 12.4926 6.13874C12.5108 6.203 12.5158 6.27024 12.5075 6.33649C12.4992 6.40275 12.4778 6.46667 12.4444 6.52448C12.411 6.5823 12.3663 6.63284 12.3131 6.67313C12.2598 6.71342 12.1991 6.74263 12.1343 6.75905C12.0696 6.77546 12.0023 6.77875 11.9363 6.76872C11.8703 6.75869 11.8069 6.73553 11.75 6.70062C11.522 6.5691 11.2633 6.49991 11.0001 6.5C10.7368 6.50009 10.4782 6.56946 10.2503 6.70113C10.0223 6.83281 9.83306 7.02215 9.70146 7.25015C9.56986 7.47814 9.50058 7.73675 9.50058 8C9.50058 8.26325 9.56986 8.52186 9.70146 8.74985C9.83306 8.97785 10.0223 9.16719 10.2503 9.29887C10.4782 9.43054 10.7368 9.49991 11.0001 9.5C11.2633 9.50009 11.522 9.4309 11.75 9.29937C11.8645 9.23718 11.9988 9.22217 12.1243 9.25753C12.2497 9.29289 12.3564 9.37583 12.4216 9.48869C12.4867 9.60154 12.5053 9.73539 12.4732 9.86171C12.4412 9.98804 12.3611 10.0969 12.25 10.165Z" fill="hsla(240, 100%, 96.67%, 1)" />
								</svg>
							</button>
							<button className="id idconfig" id="settingsbtn">
								<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 16 16" fill="none">
									<path fill-rule="evenodd" clip-rule="evenodd" d="M14.1163 9.57375C14.5306 9.14187 15 8.6525 15 8C15 7.3475 14.5306 6.85812 14.1163 6.42625L14.1108 6.42058C13.8769 6.17611 13.6362 5.92454 13.545 5.70312C13.4602 5.49915 13.455 5.16133 13.45 4.83381L13.45 4.82947C13.4406 4.22006 13.43 3.52999 12.95 3.05C12.47 2.57001 11.7799 2.5594 11.1705 2.55004L11.1662 2.54997C10.8387 2.54498 10.5008 2.53983 10.2969 2.455C10.0755 2.36383 9.8239 2.12311 9.57942 1.88918L9.57375 1.88375C9.14187 1.46937 8.6525 1 8 1C7.3475 1 6.85812 1.46937 6.42625 1.88375L6.42058 1.88918C6.1761 2.12311 5.92454 2.36383 5.70312 2.455C5.49915 2.53983 5.16133 2.54498 4.83381 2.54997L4.82947 2.55004C4.22006 2.5594 3.52999 2.57001 3.05 3.05C2.57001 3.52999 2.5594 4.22006 2.55004 4.82947L2.54997 4.83381C2.54498 5.16133 2.53983 5.49915 2.455 5.70312C2.36383 5.92454 2.12311 6.1761 1.88918 6.42058L1.88375 6.42625C1.46937 6.85812 1 7.3475 1 8C1 8.6525 1.46937 9.14187 1.88375 9.57375L1.88918 9.57942C2.12311 9.8239 2.36383 10.0755 2.455 10.2969C2.53983 10.5008 2.54498 10.8387 2.54997 11.1662L2.55004 11.1705C2.5594 11.7799 2.57001 12.47 3.05 12.95C3.52999 13.43 4.22006 13.4406 4.82947 13.45L4.83381 13.45C5.16133 13.455 5.49915 13.4602 5.70312 13.545C5.92454 13.6362 6.17611 13.8769 6.42058 14.1108L6.42625 14.1163C6.85812 14.5306 7.3475 15 8 15C8.6525 15 9.14187 14.5306 9.57375 14.1163L9.57942 14.1108C9.82389 13.8769 10.0755 13.6362 10.2969 13.545C10.5008 13.4602 10.8387 13.455 11.1662 13.45L11.1705 13.45C11.7799 13.4406 12.47 13.43 12.95 12.95C13.43 12.47 13.4406 11.7799 13.45 11.1705L13.45 11.1662C13.455 10.8387 13.4602 10.5008 13.545 10.2969C13.6362 10.0755 13.8769 9.82389 14.1108 9.57942L14.1163 9.57375ZM8 10.5C9.38071 10.5 10.5 9.38071 10.5 8C10.5 6.61929 9.38071 5.5 8 5.5C6.61929 5.5 5.5 6.61929 5.5 8C5.5 9.38071 6.61929 10.5 8 10.5Z" fill="hsla(240, 100%, 96.67%, 1)" />
								</svg>
							</button>
							<button className="id idfullscrn" id="fullscreenbtn">
								<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 16 16" fill="none">
									<path d="M10.5 3H13V5.5M5.5 13H3V10.5M13 10.5V13H10.5M3 5.5V3H5.5" stroke="hsla(240, 100%, 96.67%, 1)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
								</svg>
							</button>
						</div>
					</div>
				</div>
				<div className="gradient_bg active" style={{ zIndex: -98, }}></div>
			</div>
		</div>
	);
}